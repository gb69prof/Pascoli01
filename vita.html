<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Pascoli ‚Äî La vita</title>

<style>
:root{
  --bg1:#fdf8ef;
  --bg2:#eaf6ff;
  --ink:#1f2a33;
  --card:rgba(255,255,255,.85);
  --hl:rgba(255,183,3,.35);
  --ul:rgba(33,158,188,.85);
  --accent:rgba(33,158,188,.15);
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:linear-gradient(180deg,var(--bg2),var(--bg1));
  color:var(--ink);
}

.wrap{
  max-width:1080px;
  margin:auto;
  padding:22px;
}

h1{
  margin:0 0 8px;
  font-size:32px;
}

.subtitle{
  font-size:14px;
  color:#445;
  margin-bottom:18px;
}

/* CARD */
.card{
  background:var(--card);
  border-radius:22px;
  padding:18px;
  box-shadow:0 18px 50px rgba(0,0,0,.12);
}

/* üîí iPad: blocco totale selezione */
.prose,
.micro,
.micro *{
  user-select:none;
  -webkit-user-select:none;
  -webkit-touch-callout:none;
}

/* MICRO-BLOCCHI */
.micro{
  padding:12px 14px;
  margin-bottom:10px;
  border-radius:14px;
  background:rgba(255,255,255,.75);
  cursor:pointer;
  line-height:1.6;
  font-size:14px;
  transition:.15s;
}

.micro:hover{
  background:rgba(255,255,255,.95);
}

.micro.selected{
  outline:2px solid rgba(255,183,3,.55);
}

.micro[data-mark="hl"]{
  background:
    linear-gradient(0deg,var(--hl),var(--hl)),
    rgba(255,255,255,.9);
}

.micro[data-mark="ul"]{
  background:rgba(255,255,255,.9);
  text-decoration:underline;
  text-decoration-thickness:3px;
  text-decoration-color:var(--ul);
  text-underline-offset:4px;
}

/* TOOLBAR */
#toolbar{
  position:absolute;
  display:none;
  gap:6px;
  background:white;
  padding:8px;
  border-radius:16px;
  box-shadow:0 12px 30px rgba(0,0,0,.25);
  z-index:100;
}

#toolbar button{
  border:none;
  border-radius:999px;
  padding:8px 12px;
  font-weight:700;
  cursor:pointer;
}

/* QUADERNO */
#notebook{
  margin-top:18px;
  padding:16px;
  background:white;
  border-radius:18px;
}

#notebookText{
  white-space:pre-wrap;
  font-size:13px;
  margin:10px 0;
}

.nbActions button{
  margin-right:6px;
  margin-top:6px;
}
</style>
</head>

<body>
<div class="wrap">

<h1>Pascoli ‚Äî La vita</h1>
<p class="subtitle">
Testo a micro-blocchi: ogni tocco √® una scelta, non un gesto automatico.
</p>

<div class="card prose" id="area">

  <!-- MICRO-BLOCCHI (TESTO RIFATTO FEDELMENTE) -->

  <div class="micro">
    Giovanni Pascoli nasce a San Mauro di Romagna nel 1855.
  </div>

  <div class="micro">
    La sua infanzia viene spezzata dall‚Äôassassinio del padre Ruggero,
    avvenuto il 10 agosto 1867.
  </div>

  <div class="micro">
    Nei pochi anni successivi muoiono anche la madre e altri familiari:
    una sequenza di lutti senza spiegazione.
  </div>

  <div class="micro">
    Da questa frattura nasce l‚Äôidea del <b>nido</b>:
    non un tema sentimentale, ma un bisogno di sopravvivenza.
  </div>

  <div class="micro">
    Pascoli studia in collegio a Urbino e poi all‚Äôuniversit√† di Bologna,
    dove √® allievo di Carducci.
  </div>

  <div class="micro">
    Gli anni universitari sono agitati:
    partecipa a proteste politiche,
    perde la borsa di studio
    e conosce anche il carcere.
  </div>

  <div class="micro">
    In seguito riprende gli studi,
    si laurea
    e inizia la carriera di insegnante.
  </div>

  <div class="micro">
    Costruisce la propria vita attorno alle sorelle,
    in particolare Maria, detta ‚ÄúMari√π‚Äù.
  </div>

  <div class="micro">
    Il matrimonio di Ida viene vissuto come un abbandono:
    non √® un dettaglio affettivo,
    ma una ferita strutturale.
  </div>

  <div class="micro">
    Ottiene incarichi universitari importanti,
    fino a succedere a Carducci a Bologna nel 1903.
  </div>

  <div class="micro">
    La sua vera dimora resta per√≤ Castelvecchio di Barga:
    campagna, natura, suoni,
    cose minime.
  </div>

  <div class="micro">
    Pascoli muore a Bologna nel 1912,
    ma viene sepolto a Castelvecchio.
  </div>

</div>

<!-- TOOLBAR -->
<div id="toolbar">
  <button id="ul">‚úèÔ∏è</button>
  <button id="hl">üñçÔ∏è</button>
  <button id="pin">üìå</button>
  <button id="clear">‚úï</button>
</div>

<!-- QUADERNO -->
<div id="notebook" class="card">
  <b>üü° Quaderno</b>
  <div id="notebookText"></div>
  <div class="nbActions">
    <button id="copy">Copia</button>
    <button id="save">Salva .txt</button>
    <button id="wipe">Svuota</button>
  </div>
</div>

</div>

<script>
const micros=[...document.querySelectorAll('.micro')]
const bar=document.getElementById('toolbar')
let sel=null
let notes=[]

micros.forEach(m=>{
  m.addEventListener('click',()=>{
    micros.forEach(x=>x.classList.remove('selected'))
    sel=m
    m.classList.add('selected')
    const r=m.getBoundingClientRect()
    bar.style.top=window.scrollY+r.bottom+6+'px'
    bar.style.left=r.left+'px'
    bar.style.display='flex'
  })
})

function mark(type){
  if(!sel)return
  if(type) sel.dataset.mark=type
  else delete sel.dataset.mark
}

ul.onclick=()=>mark('ul')
hl.onclick=()=>mark('hl')
clear.onclick=()=>mark(null)

pin.onclick=()=>{
  if(!sel)return
  const t=sel.textContent.trim()
  if(!notes.includes(t)){
    notes.push(t)
    render()
  }
}

function render(){
  notebookText.textContent=notes.join('\n')
}

copy.onclick=()=>{
  navigator.clipboard.writeText(notes.join('\n'))
}

save.onclick=()=>{
  const b=new Blob([notes.join('\n')],{type:'text/plain'})
  const a=document.createElement('a')
  a.href=URL.createObjectURL(b)
  a.download='pascoli_vita.txt'
  a.click()
}

wipe.onclick=()=>{
  notes=[]
  render()
}
</script>

</body>
</html>
